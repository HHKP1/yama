(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bf64a7e"],{"19a9":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticStyle:{flex:"0 0 72%"}},[a("mq-layout",{attrs:{mq:"md+"}},[a("vue-element-loading",{attrs:{active:t.isActive,size:"60",isActiveDelay:!0,duration:"1",spinner:"spinner",color:"#FF6700"}}),t.$route.path.includes("/collections/defect")?t._e():a("div",{staticClass:"defect_content"},[a("div",{staticClass:"defect_filter_count"},[a("div",{staticClass:"defect_filter_item"},[a("p",{staticClass:"defect_title"},[t._v("Загалом дефектів знайдено: "),a("span",[t._v(t._s(t.dfCard.length))])])])]),a("div",{staticClass:"sorted_item"},[a("p",{staticClass:"sorted_title"},[t._v("Показані останні дефекти зі змінами (за замовчуванням)")])]),a("transition",{attrs:{name:"loader-map"}},[a("GoogleMap",{directives:[{name:"show",rawName:"v-show",value:this.$API2.showMap,expression:"this.$API2.showMap"}],attrs:{defectMarkers:t.dfCard,mapTitle:"Map"}})],1),a("div",{staticClass:"grid-container_overlay"},[0!=this.$API2.orgInfo.length||this.$API2.showMap?t._e():a("div",{staticClass:"carousel_overlay"},[a("p",{staticClass:"empty_message"},[t._v("По цьому запиту немає дефектів")])])]),a("div",{staticClass:"grid-block"},[a("transition",{attrs:{name:"fade-loader"}},[!this.$API2.showMap&&this.$API2.orgInfo.length>0?a("div",{staticClass:"grid-container"},t._l(t.paginate,(function(s){return a("div",{key:s.id,staticClass:"defect_card"},[a("router-link",{attrs:{to:"/"+s.id}},[a("div",{staticClass:"my-container",staticStyle:{width:"100%",display:"block",height:"100%"},on:{click:function(e){return t.listClick(e,"/"+s.id)}}},[a("vue-element-loading",{attrs:{active:t.isActive,size:"60",duration:"1",spinner:"spinner",color:"#FF6700"}}),a("div",{staticClass:"defect_image"},[a("img",{staticClass:"card_image",attrs:{src:s.photo[0].url,alt:""}}),a("p",{staticClass:"defect_date"},[t._v(t._s(t._f("moment")(new Date(s.photo[0].timestamp),"DD.MM.YY в HH:mm")))]),t._l(t.arrMarkers,(function(e){return a("div",{key:e.id,staticClass:"defect_color"},[e.name===s.defect_type?a("img",{staticClass:"type_marker",staticStyle:{margin:"0 20px"},attrs:{src:e.icon,alt:"Type marker"}}):t._e()])}))],2),a("div",{staticClass:"defect_info"},[a("div",{staticClass:"defect_status"},[a("div",{staticClass:"status_item"},["new"==s.status?a("span",[t._v("Новий")]):t._e(),"approved"==s.status?a("span",[t._v("Погоджений")]):t._e(),"sent"==s.status?a("span",[t._v("Відправлений")]):t._e(),"replied"==s.status?a("span",[t._v("Відповідь")]):t._e(),"no_answer"==s.status?a("span",[t._v("Немає відповіді")]):t._e(),"rejected"==s.status?a("span",[t._v("Відхилений")]):t._e(),"escalated"==s.status?a("span",[t._v("Ескалований")]):t._e(),"in_progress"==s.status?a("span",[t._v("В процесі")]):t._e(),"done"==s.status?a("span",[t._v("Виправлений")]):t._e()]),a("div",{staticClass:"status_comments"},[s.comments?a("p",{staticClass:"status_count",attrs:{title:"Кількість коментарів: "+s.comments.length}},[t._v(t._s(s.comments.length))]):a("p",{staticClass:"status_count"},[t._v("0")]),a("img",{attrs:{src:e("6503"),alt:""}})])]),a("p",{staticClass:"defect_adress",attrs:{title:s.address}},[t._v(t._s(s.address))])])],1)])],1)})),0):t._e()])],1)],1),this.$API2.showMap?t._e():a("div",{staticClass:"card_pagination"},[a("div",{staticClass:"pagination_control"},[a("ul",{staticClass:"pagination"},t._l(t.totalPages,(function(s){return a("li",{key:s,staticClass:"waves-effect",class:{active:t.currentPage===s,last:s==t.totalPages&&Math.abs(s-t.currentPage)>3,first:1==s&&Math.abs(s-t.currentPage)>3},on:{click:function(e){return t.setPage(s)}}},[t._v(" "+t._s(s)+" ")])})),0)])])],1),a("mq-layout",{attrs:{mq:"sm"}},[a("div",{staticClass:"container_works_mb"},[a("div",{staticClass:"container_defects_mb"},[a("div",{staticClass:"defect_content_mb"},[a("GoogleMap",{directives:[{name:"show",rawName:"v-show",value:this.$API2.showMap,expression:"this.$API2.showMap"}],attrs:{defectMarkers:t.dfCard,mapTitle:"Map"}}),a("div",{staticClass:"grid-container_overlay"},[0!=this.$API2.orgInfo.length||this.$API2.showMap?t._e():a("div",{staticClass:"carousel_overlay"},[a("p",{staticClass:"empty_message"},[t._v("По цьому запиту немає дефектів")])])]),a("p",{staticClass:"sorted_title_mb"},[t._v("Показані останні дефекти зі змінами (за замовчуванням)")]),!this.$API2.showMap&&this.$API2.orgInfo.length>0?a("div",{staticClass:"grid-container_mb"},t._l(t.dfCard,(function(s){return a("div",{key:s.id,staticClass:"defect_card"},[a("router-link",{attrs:{to:"/"+s.id}},[a("div",{staticClass:"my-container",staticStyle:{width:"100%",display:"block",height:"100%"},on:{click:function(e){return t.listClick(e,"/"+s.id)}}},[a("vue-element-loading",{attrs:{active:t.isActive,size:"60",duration:"1",spinner:"spinner",color:"#FF6700"}}),a("div",{staticClass:"defect_image"},[a("img",{staticClass:"card_image_mb",attrs:{src:s.photo[0].url,alt:""}}),a("p",{staticClass:"defect_date"},[t._v(t._s(t._f("moment")(new Date(s.photo[0].timestamp),"DD.MM.YY в HH:mm")))]),a("div",{staticClass:"defect_color"})]),a("div",{staticClass:"defect_info"},[a("div",{staticClass:"defect_status"},[a("div",{staticClass:"status_item"},["new"==s.status?a("span",[t._v("Новий")]):t._e(),"approved"==s.status?a("span",[t._v("Погоджений")]):t._e(),"sent"==s.status?a("span",[t._v("Відправлений")]):t._e(),"replied"==s.status?a("span",[t._v("Відповідь")]):t._e(),"no_answer"==s.status?a("span",[t._v("Немає відповіді")]):t._e(),"rejected"==s.status?a("span",[t._v("Відхилений")]):t._e(),"escalated"==s.status?a("span",[t._v("Ескалований")]):t._e(),"in_progress"==s.status?a("span",[t._v("В процесі")]):t._e(),"done"==s.status?a("span",[t._v("Виправлений")]):t._e()]),a("div",{staticClass:"status_comments"},[s.comments?a("p",{staticClass:"status_count",attrs:{title:"Кількість коментарів: "+s.comments.length}},[t._v(t._s(s.comments.length))]):a("p",{staticClass:"status_count"},[t._v("0")]),a("img",{attrs:{src:e("6503"),alt:""}})])]),a("p",{staticClass:"defect_adress",attrs:{title:s.address}},[t._v(t._s(s.address))])])],1)])],1)})),0):t._e(),this.$API2.showMap?t._e():a("div",{staticClass:"card_pagination"},[a("div",{staticClass:"pagination_control"},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"disabled"},[a("a",{attrs:{href:"#!"}},[t._v("F")])]),a("li",{staticClass:"active"},[a("a",{attrs:{href:"#!"}},[t._v("1")])]),a("li",{staticClass:"waves-effect"},[a("a",{attrs:{href:"#!"}},[t._v("2")])]),a("li",{staticClass:"waves-effect"},[a("a",{attrs:{href:"#!"}},[t._v("3")])]),a("li",{staticClass:"waves-effect"},[a("a",{attrs:{href:"#!"}},[t._v(" > ")])])])])])],1)])])])],1)},i=[],n=e("1da1"),r=(e("d81d"),e("b0c0"),e("fb6a"),e("96cf"),e("a026")),c=e("6ad0"),o=e.n(c),l=e("6ba0"),d=e("9735"),_={name:"collectionList",components:{VueElementLoading:o.a,GoogleMap:l["default"]},data:function(){return{options:{options_sort_by:[{label:"Нові",value:"new"},{label:"В процесі",value:"in_progress"}]},comment:"",sort_by:"",dfCards:[],isComments:!1,isOpen:!1,isActive:!1,isExpand:!1,appsLoaded:!1,selfFilters:!1,showMap:!1,currentPage:1,resultCount:0,itemsPerPage:8}},created:function(){r["a"].prototype.$API3=this},beforeMount:function(){this.isActive||(this.isActive=!0)},mounted:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:t.$API.title="Колекція",t.$API.page="collection",t.isActive=!1,t.dfCards=t.dfCard;case 4:case"end":return s.stop()}}),s)})))()},methods:{listClick:function(t,s){!t||2!=t.which&&4!=t.button||(t.preventDefault(!0),window.open(s,"_new"),this.$eventBus.$emit("dfCards",this.dfCards))},setPage:function(t){this.currentPage=t}},computed:{dfCard:function(){return this.$API2.orgInfo.map((function(t){return{id:t.id,address:t.address,photo:t.photos,status:t.case_status.current.status,comments:t.comments,defect_type:t.defect_type}}))},arrMarkers:function(){return d["a"].map((function(t){return{icon:t.icon,name:t.name}}))},totalPages:function(){return Math.ceil(this.resultCount/this.itemsPerPage)},paginate:function(){if(this.dfCard){this.resultCount=this.$API2.dfCard.length,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages);var t=this.currentPage*this.itemsPerPage-this.itemsPerPage;return this.$API2.dfCard.slice(t,t+this.itemsPerPage)}}},watch:{}},u=_,p=(e("989a"),e("2877")),v=Object(p["a"])(u,a,i,!1,null,null,null);s["default"]=v.exports},"8f71":function(t,s,e){},"989a":function(t,s,e){"use strict";e("8f71")},fb6a:function(t,s,e){"use strict";var a=e("23e7"),i=e("861d"),n=e("e8b5"),r=e("23cb"),c=e("50c4"),o=e("fc6a"),l=e("8418"),d=e("b622"),_=e("1dde"),u=_("slice"),p=d("species"),v=[].slice,f=Math.max;a({target:"Array",proto:!0,forced:!u},{slice:function(t,s){var e,a,d,_=o(this),u=c(_.length),m=r(t,u),h=r(void 0===s?u:s,u);if(n(_)&&(e=_.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)?i(e)&&(e=e[p],null===e&&(e=void 0)):e=void 0,e===Array||void 0===e))return v.call(_,m,h);for(a=new(void 0===e?Array:e)(f(h-m,0)),d=0;m<h;m++,d++)m in _&&l(a,d,_[m]);return a.length=d,a}})}}]);